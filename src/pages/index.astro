---
import BaseLayout from "../layouts/BaseLayout.astro";
import { siteConfig } from "../config/site";
import Hero from "../components/widgets/Hero.astro";
import Features from "../components/widgets/Features.astro";
import Content2 from "../components/widgets/Content2.astro";
import devImg from "../assets/images/dev_balanced.png";
import openSourceImg from "../assets/images/open-source.png";
import { getCollection } from "astro:content";

const metadata = {
	title: `${siteConfig.name} â€” Developer & Designer`,
	description: siteConfig.description,
	ignoreTitleTemplate: true,
};

const recentCaseStudies = (await getCollection("caseStudies"))
	.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
	.slice(0, 3);

const recentBlogs = (await getCollection("blog"))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);
---

<BaseLayout {metadata}>
	<Hero
		title={`Hi, I'm <span class="bg-linear-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">Your Name</span><br class="hidden md:block" />Developer & Designer`}
		tagline="Portfolio & Blog"
		description="I craft exceptional digital experiences through code and design. Specializing in full-stack development, UI/UX, and modern web technologies."
		actions={[
			{
				text: "View Case Studies",
				href: "/case-studies",
				variant: "primary",
				icon: "lucide:briefcase",
			},
			{
				text: "Read Blog",
				href: "/blog",
				variant: "secondary",
				icon: "lucide:book-open",
			},
		]}
	/>
	<Features
		tagline="Expertise"
		title="What I Do"
		subtitle="Specialized skills and technologies I work with to bring ideas to life."
		features={[
			{
				title: "Full-Stack Development",
				description: "Building scalable web applications with modern frameworks and best practices.",
				icon: "lucide:code",
				iconClass: "bg-blue-500/10 text-blue-400",
			},
			{
				title: "UI/UX Design",
				description: "Creating intuitive and beautiful user interfaces that delight users.",
				icon: "lucide:palette",
				iconClass: "bg-purple-500/10 text-purple-400",
			},
			{
				title: "Performance Optimization",
				description: "Ensuring fast, efficient, and SEO-friendly web experiences.",
				icon: "lucide:zap",
				iconClass: "bg-pink-500/10 text-pink-400",
			},
		]}
	/>
	
	{recentCaseStudies.length > 0 && (
	<Content2
		items={recentCaseStudies.map(study => ({
			title: study.data.title,
			description: study.data.description,
			icon: "lucide:briefcase",
			iconClass: "bg-blue-500/10 text-blue-400",
		}))}
		image={devImg}
		imageAlt="Recent Projects"
	>
		<Fragment>
			<h3 class="text-2xl font-bold tracking-tight sm:text-3xl mb-2">
				Featured Case Studies
			</h3>
			Explore my recent projects and the impact they've made.
			<a href="/case-studies" class="inline-flex items-center text-blue-400 hover:text-blue-300 mt-4">
				View all case studies
				<svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
				</svg>
			</a>
		</Fragment>
	</Content2>
	)}

	{recentBlogs.length > 0 && (
	<Content2
		items={recentBlogs.map(post => ({
			title: post.data.title,
			description: post.data.description,
			icon: "lucide:book-open",
			iconClass: "bg-purple-500/10 text-purple-400",
		}))}
		image={openSourceImg}
		imageAlt="Recent Blog Posts"
		isReversed={true}
	>
		<Fragment>
			<h3 class="text-2xl font-bold tracking-tight sm:text-3xl mb-2">
				Latest from the Blog
			</h3>
			Insights, tutorials, and thoughts on web development and design.
			<a href="/blog" class="inline-flex items-center text-purple-400 hover:text-purple-300 mt-4">
				Read all posts
				<svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
				</svg>
			</a>
		</Fragment>
	</Content2>
	)}
</BaseLayout>
