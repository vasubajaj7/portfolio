---
import BaseLayout from "../layouts/BaseLayout.astro";
import { siteConfig } from "../config/site";
import Hero from "../components/widgets/Hero.astro";
import Features from "../components/widgets/Features.astro";
import Content2 from "../components/widgets/Content2.astro";
import Values from "../components/widgets/Values.astro";
import devImg from "../assets/images/dev_balanced.png";
import aboutImage from "../assets/images/about-office.webp";
import { getCollection } from "astro:content";
import { getImage } from "astro:assets";

const metadata = {
	title: `${siteConfig.name} â€” Solutions Architect`,
	description: siteConfig.description,
	ignoreTitleTemplate: true,
};

const recentCaseStudies = (await getCollection("caseStudies"))
	.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
	.slice(0, 3);

const recentBlogs = (await getCollection("blog"))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 3);

const values = [
    {
        title: "Cloud-Native Solutions",
        description: "Architecting scalable, resilient cloud infrastructure across AWS, Azure, and GCP.",
    },
    {
        title: "Data Platform Engineering",
        description: "Building modern data platforms with Databricks and Microsoft Fabric for analytics at scale.",
    },
    {
        title: "Governance & Compliance",
        description: "Implementing robust governance frameworks ensuring security and regulatory compliance.",
    },
    {
        title: "Best Practices",
        description: "Following industry standards and cloud-native patterns for optimal performance.",
    },
    {
        title: "Automation First",
        description: "Leveraging IaC and DevOps practices to automate infrastructure and deployments.",
    },
    {
        title: "Continuous Learning",
        description: "Staying current with emerging cloud technologies and architectural patterns.",
    },
];

const optimizedImage = await getImage({
    src: aboutImage,
    format: "webp",
});
---

<BaseLayout {metadata}>
	<link slot="head" rel="preload" href={optimizedImage.src} as="image" />
	
	<!-- Hero Section -->
	<section id="home">
		<Hero
			title={`Hi, I'm <span class="bg-linear-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent">Vasu Bajaj</span><br class="hidden md:block" />`}
			tagline="Technical Architect | 12+ Years Experience"
			description="Specializing in scalable data platforms, cloud-native architectures, and enterprise governance across AWS, GCP, Azure, Databricks, Snowflake, and Microsoft Fabric. Delivering 30-40% cost reductions and 10x performance improvements."
			actions={[
				{
					text: "View Case Studies",
					href: "#case-studies",
					variant: "primary",
					icon: "lucide:briefcase",
				},
				{
					text: "Read Blog",
					href: "#blog",
					variant: "secondary",
					icon: "lucide:book-open",
				},
			]}
		/>
	</section>

	<!-- Expertise Section -->
	<section id="expertise">
		<Features
			tagline="Expertise"
			title="What I Do"
			subtitle="Specialized skills in cloud architecture and data platform engineering."
			features={[
				{
					title: "Cloud Architecture",
					description: "Designing scalable solutions on AWS, Azure, and GCP with best practices.",
					icon: "lucide:cloud",
					iconClass: "bg-blue-500/10 text-blue-400",
				},
				{
					title: "Databricks & Fabric",
					description: "Building modern data platforms with Databricks and Microsoft Fabric.",
					icon: "lucide:database",
					iconClass: "bg-purple-500/10 text-purple-400",
				},
				{
					title: "Governance & Security",
					description: "Implementing robust governance frameworks and security best practices.",
					icon: "lucide:shield",
					iconClass: "bg-pink-500/10 text-pink-400",
				},
			]}
		/>
	</section>

	<!-- About Section -->
	<section id="about">
		<Content2
			title="About Me"
			description={[
				"I'm a Technical Architect with 12+ years of experience designing scalable data platforms, cloud-native architectures, and governed analytics ecosystems across AWS, GCP, Azure, Snowflake, Databricks, and Microsoft Fabric.",
				"I deliver measurable results: 30-40% cost reductions, 10x performance improvements, and enterprise-grade governance solutions. My expertise spans data warehousing, platform modernization, security, and leading cross-functional teams to build robust, compliant data solutions.",
			]}
			image={aboutImage}
			imageAlt="Technical Architect workspace"
			actions={[
				{
					text: "Learn More",
					href: "/about",
					variant: "primary",
					icon: "lucide:user",
				},
				{
					text: "View Projects",
					href: "#case-studies",
					variant: "secondary",
					icon: "lucide:briefcase",
				},
			]}
		/>
	</section>
	
	<!-- Case Studies Section -->
	<section id="case-studies">
		{recentCaseStudies.length > 0 && (
		<Content2
			items={recentCaseStudies.map(study => ({
				title: study.data.title,
				description: study.data.description,
				icon: "lucide:briefcase",
				iconClass: "bg-blue-500/10 text-blue-400",
			}))}
			image={devImg}
			imageAlt="Recent Projects"
		>
			<Fragment>
				<h3 class="text-2xl font-bold tracking-tight sm:text-3xl mb-2">
					Featured Case Studies
				</h3>
				Explore my recent projects and the impact they've made.
				<a href="/case-studies" class="inline-flex items-center text-blue-600 hover:text-blue-700 mt-4">
					View all case studies
					<svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
					</svg>
				</a>
			</Fragment>
		</Content2>
		)}
	</section>

	<!-- Blog Section -->
	<section id="blog">
		{recentBlogs.length > 0 && (
		<Content2
			items={recentBlogs.map(post => ({
				title: post.data.title,
				description: post.data.description,
				icon: "lucide:book-open",
				iconClass: "bg-purple-500/10 text-purple-400",
			}))}
			image={devImg}
			imageAlt="Recent Blog Posts"
			isReversed={true}
		>
			<Fragment>
				<h3 class="text-2xl font-bold tracking-tight sm:text-3xl mb-2">
					Latest from the Blog
				</h3>
				Insights, tutorials, and thoughts on cloud architecture and data platforms.
				<a href="/blog" class="inline-flex items-center text-purple-600 hover:text-purple-700 mt-4">
					Read all posts
					<svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
					</svg>
				</a>
			</Fragment>
		</Content2>
		)}
	</section>
</BaseLayout>
